<h1 id="-">标签合并</h1>
<hr>
<p>在标签开发模式下，新增加了标签合并功能，可以对已有的标签进行个性化改造。</p>
<ul>
<li><strong>首先创建合并文件</strong></li>
</ul>
<p>我们以系统中的demo.view为例进行个性化配置</p>
<p>1.创建demo.conf配置文件</p>
<pre><code class="lang-xml"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span><span class="hljs-meta">?&gt;</span></span> 
<span class="hljs-tag">&lt;<span class="hljs-name">patch</span> <span class="hljs-attr">xmlns:h</span>=<span class="hljs-string">"http://www.hand-china.com/hap"</span> &gt;</span>

    <span class="hljs-comment">&lt;!--在节点后插入--&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">xpath</span> <span class="hljs-attr">expr</span>=<span class="hljs-string">"h:grid[@id='grid']/*/h:column[@field='url']"</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"after"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h:column</span> <span class="hljs-attr">field</span>=<span class="hljs-string">"url2"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">'&lt;@spring.message "resource.url"/&gt;2'</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"200"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">xpath</span>&gt;</span>

    <span class="hljs-comment">&lt;!--在节前后插入--&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">xpath</span> <span class="hljs-attr">expr</span>=<span class="hljs-string">"h:grid[@id='grid']/*/h:column[@field='lov']"</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"before"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h:column</span> <span class="hljs-attr">field</span>=<span class="hljs-string">"url3"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">'&lt;@spring.message "resource.url"/&gt;3'</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"200"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">xpath</span>&gt;</span>

    <span class="hljs-comment">&lt;!--删除节点--&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">xpath</span> <span class="hljs-attr">expr</span>=<span class="hljs-string">"h:grid[@id='grid']/*/h:column[@field='phone']"</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"remove"</span>/&gt;</span>

    <span class="hljs-comment">&lt;!--替换节点--&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">xpath</span> <span class="hljs-attr">expr</span>=<span class="hljs-string">"h:grid[@id='grid']/*/h:column[@field='name']"</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"replace"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h:column</span> <span class="hljs-attr">field</span>=<span class="hljs-string">"name1"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">'测试姓名1'</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"120"</span> <span class="hljs-attr">editor</span>=<span class="hljs-string">"nameEditor"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h:column</span> <span class="hljs-attr">field</span>=<span class="hljs-string">"name2"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">'测试姓名2'</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"120"</span> <span class="hljs-attr">editor</span>=<span class="hljs-string">"nameEditor"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">xpath</span>&gt;</span>

    <span class="hljs-comment">&lt;!--设置节点属性--&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">xpath</span> <span class="hljs-attr">expr</span>=<span class="hljs-string">"h:grid[@id='grid']"</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"attribute"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">attribute</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"rownumber"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"false"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">xpath</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">patch</span>&gt;</span>
</code></pre>
<p><strong>说明</strong></p>
<blockquote>
<ul>
<li>xpath 节点是每一步个性化动作</li>
<li>expr 按照XPATH语法查找节点 <strong>注意: 仅实现了按照属性查找和路径通配符</strong></li>
<li>action 对当前节点进行个性化<ul>
<li>after 在当前节点后插入</li>
<li>before 在当前节点前插入</li>
<li>remove 删除当前节点</li>
<li>replace 替换当前节点</li>
<li>attribute 设置当前节点属性</li>
</ul>
</li>
</ul>
</blockquote>
<p>2.对需要个性化的页面进行配置</p>
<p>(a) 打开「资源管理」功能，查找 demo.view 资源，点击个性化配置按钮
<img src="/assets/QQ截图20161230151924.png" alt=""></p>
<p>(b) 新增 demo.conf 的配置，并且启用
<img src="/assets/QQ截图20161230151948.png" alt=""></p>
<p>(c) 成功保存后，刷新 demo.view 观察效果</p>
